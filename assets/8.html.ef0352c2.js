import{_ as a}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as n,c as s,f as e}from"./app.ca0279c0.js";const i={},o=e(`<h1 id="\u5236\u4F5Cwindows-server2019-qcow2\u955C\u50CF" tabindex="-1"><a class="header-anchor" href="#\u5236\u4F5Cwindows-server2019-qcow2\u955C\u50CF" aria-hidden="true">#</a> \u5236\u4F5CWindows server2019 qcow2\u955C\u50CF</h1><h3 id="\u5229\u7528vm\u73AF\u5883\u5236\u4F5C\u8BE5\u955C\u50CF" tabindex="-1"><a class="header-anchor" href="#\u5229\u7528vm\u73AF\u5883\u5236\u4F5C\u8BE5\u955C\u50CF" aria-hidden="true">#</a> \u5229\u7528VM\u73AF\u5883\u5236\u4F5C\u8BE5\u955C\u50CF</h3><h3 id="_1-\u5236\u4F5C\u51C6\u5907" tabindex="-1"><a class="header-anchor" href="#_1-\u5236\u4F5C\u51C6\u5907" aria-hidden="true">#</a> 1.\u5236\u4F5C\u51C6\u5907</h3><blockquote><ul><li>\u51C6\u5907\u4E00\u4E2Awindow_server2019.iso\u955C\u50CF</li><li>\u51C6\u5907\u4E00\u4E2Awin10\u7684virtio\u9A71\u52A8 \uFF08\u8FD9\u91CC\u6211\u6CA1\u6709\u627E\u5230server2019\u7684virtio\u9A71\u52A8\u6240\u4EE5\u7528\u7684\u662Fwin10\u7684\u9A71\u52A8\uFF09</li><li>\u51C6\u5907\u597D\u4E00\u4E2Aqcow2\u5B58\u50A8\u76D8</li></ul></blockquote><p>\u63D0\u524D\u5C06\u51C6\u5907\u597D\u7684\u955C\u50CF\u653E\u8FDB\u4E00\u4E2A\u65B0\u7684\u76EE\u5F55\u4E2D\uFF0C\u7136\u540E\u9700\u8981\u7528\u5230\u8BE5\u76EE\u5F55\u7684\u8DEF\u5F84\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ls /root/</span>
cn_windows_server_2019_updated_march_2019_x64_dvd_c1ffb46c.iso

<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cd windows/ </span>
<span class="token punctuation">[</span>root@localhost windows<span class="token punctuation">]</span><span class="token comment"># pwd</span>
/root/windows
<span class="token punctuation">[</span>root@localhost windows<span class="token punctuation">]</span><span class="token comment"># ls </span>
windows_server2019.qcow2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-\u5B89\u88C5virtio" tabindex="-1"><a class="header-anchor" href="#_2-\u5B89\u88C5virtio" aria-hidden="true">#</a> 2.\u5B89\u88C5virtio</h3><p>\u56E0\u4E3Alinux\u672C\u8EAB\u5E76\u6CA1\u6709virtio\u9A71\u52A8\u5408\u9002windows\uFF0C\u6240\u4EE5\u9700\u8981\u501F\u52A9windos10\u7684virtio\u7684\u9A71\u52A8\u3002\u4E0D\u7136\u5B89\u88C5\u7CFB\u7EDF\u7684\u65F6\u5019\u4F1A\u62A5\u9519\uFF0C\u800C\u4E14\u6CA1\u6709\u7F51\u7EDC\u9A71\u52A8\u6A21\u5757\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost windows<span class="token punctuation">]</span><span class="token comment">#yum install -y https://fedorapeople.org/groups/virt/virtio-win/repo/stable/virtio-win-0.1.185-2.noarch.rpm</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_3-\u521B\u5EFA\u4E00\u4E2A\u5B58\u50A8\u78C1\u76D8" tabindex="-1"><a class="header-anchor" href="#_3-\u521B\u5EFA\u4E00\u4E2A\u5B58\u50A8\u78C1\u76D8" aria-hidden="true">#</a> 3.\u521B\u5EFA\u4E00\u4E2A\u5B58\u50A8\u78C1\u76D8</h3><p>qemu-img\u7684\u547D\u4EE4\u662F\u521B\u5EFAqcow2\u955C\u50CF\uFF0C\u53EF\u4EE5\u5F53\u4F5C\u7CFB\u7EDF\u76D8\u6216\u8005\u662F\u542F\u52A8\u76D8\u3002</p><p>\u8FD9\u91CC\u9009\u62E9\u521B\u5EFAqcow2\u7684\u7C7B\u578B\uFF0C\u5927\u5C0F\u4E3A40G\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost windows<span class="token punctuation">]</span><span class="token comment"># qemu-img create  -f qcow2 windows_server2019.qcow2 40G</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_4-\u521B\u5EFA\u4E00\u53F0windows-server2019\u7684\u5B9E\u4F8B" tabindex="-1"><a class="header-anchor" href="#_4-\u521B\u5EFA\u4E00\u53F0windows-server2019\u7684\u5B9E\u4F8B" aria-hidden="true">#</a> 4.\u521B\u5EFA\u4E00\u53F0windows_server2019\u7684\u5B9E\u4F8B</h3><p>\u4F7F\u7528virt-install\u547D\u4EE4\u521B\u5EFA</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost windows<span class="token punctuation">]</span><span class="token comment"># virt-install  --name winserver2019       \\</span>
    <span class="token parameter variable">--ram</span> <span class="token number">4096</span> <span class="token parameter variable">--vcpus</span> <span class="token number">2</span> <span class="token parameter variable">--arch</span><span class="token operator">=</span>x86_64         <span class="token punctuation">\\</span>
    <span class="token parameter variable">--network</span> <span class="token assign-left variable">network</span><span class="token operator">=</span>default,model<span class="token operator">=</span>virtio      <span class="token punctuation">\\</span>
    <span class="token parameter variable">--cdrom</span><span class="token operator">=</span>/root/cn_windows_server_2019_updated_march_2019_x64_dvd_c1ffb46c.iso <span class="token punctuation">\\</span>
    <span class="token parameter variable">--disk</span><span class="token operator">=</span>/root/windows/windows_server2019.qcow2,format<span class="token operator">=</span>qcow2,device<span class="token operator">=</span>disk,bus<span class="token operator">=</span>virtio   <span class="token punctuation">\\</span>
    <span class="token parameter variable">--disk</span><span class="token operator">=</span>/usr/share/virtio-win/virtio-win-0.1.185.iso      <span class="token punctuation">\\</span>
    <span class="token parameter variable">--disk</span><span class="token operator">=</span>/usr/share/virtio-win/virtio-win-0.1.185_amd64.vfd,device<span class="token operator">=</span>floppy   <span class="token punctuation">\\</span>
    <span class="token parameter variable">--graphics</span> vnc,listen<span class="token operator">=</span><span class="token number">0.0</span>.0.0 <span class="token parameter variable">--video</span> qxl <span class="token parameter variable">--channel</span> spicevmc       <span class="token punctuation">\\</span>
    --os-type windows --os-variant win2k19
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD0\u884C\u5B8C\u547D\u4EE4\u4E4B\u540E\u4F1A\u51FA\u73B0\u5982\u4E0B\u5F00\u59CB\u5B89\u88C5\u7136\u540E\u5F39\u51FA\u7A97\u53E3\u3002</p><p><img src="https://pic1.xuehuaimg.com/proxy/gitee.com/isicman/images/raw/master/202202091621230.png" alt="img" loading="lazy"></p><h3 id="_5-\u52A0\u8F7D\u9A71\u52A8" tabindex="-1"><a class="header-anchor" href="#_5-\u52A0\u8F7D\u9A71\u52A8" aria-hidden="true">#</a> 5.\u52A0\u8F7D\u9A71\u52A8</h3><p>\u521B\u5EFA\u5B8C\u6210\u4E4B\u540E\u8FDB\u53BB\u88C5\u7CFB\u7EDF\u4F1A\u9047\u5230\u95EE\u9898\u6CA1\u6709\u52A0\u8F7D\u9A71\u52A8\uFF0C\u6309\u7167\u6211\u7684\u64CD\u4F5C\u89E3\u51B3\u3002</p><img src="https://pic1.xuehuaimg.com/proxy/raw.githubusercontent.com/2756864799zhang/image/main/img/202205070145317.png" alt="img" style="zoom:67%;"><img src="https://pic1.xuehuaimg.com/proxy/raw.githubusercontent.com/2756864799zhang/image/main/img/202205070145284.png" alt="img" style="zoom:67%;"><img src="https://pic1.xuehuaimg.com/proxy/raw.githubusercontent.com/2756864799zhang/image/main/img/202205070145386.png" alt="img"><p><img src="https://pic1.xuehuaimg.com/proxy/raw.githubusercontent.com/2756864799zhang/image/main/img/202205070145227.png" alt="img" loading="lazy"></p><p><img src="https://pic1.xuehuaimg.com/proxy/raw.githubusercontent.com/2756864799zhang/image/main/img/202205070146089.png" alt="img" loading="lazy"></p><p><img src="https://pic1.xuehuaimg.com/proxy/raw.githubusercontent.com/2756864799zhang/image/main/img/202204111247182.png" alt="img" loading="lazy"></p><p><img src="https://pic1.xuehuaimg.com/proxy/raw.githubusercontent.com/2756864799zhang/image/main/img/202205070146566.png" alt="img" loading="lazy"></p><p><img src="https://pic1.xuehuaimg.com/proxy/raw.githubusercontent.com/2756864799zhang/image/main/img/202205070146516.png" alt="img" loading="lazy"></p><p><img src="https://pic1.xuehuaimg.com/proxy/raw.githubusercontent.com/2756864799zhang/image/main/img/202205070146038.png" alt="img" loading="lazy"></p><h3 id="_6-\u5B89\u88C5\u9A71\u52A8" tabindex="-1"><a class="header-anchor" href="#_6-\u5B89\u88C5\u9A71\u52A8" aria-hidden="true">#</a> 6.\u5B89\u88C5\u9A71\u52A8</h3><p>\u7CFB\u7EDF\u5B89\u88C5\u5B8C\u6210\u4E4B\u540E\uFF0C\u9700\u8981\u5B89\u88C5\u4EE5\u592A\u7F51\u9002\u914D\u5668\uFF08\u539F\u672C\u662F\u574F\u7684\u662F\u9700\u8981\u5B89\u88C5\uFF09</p><p><img src="https://pic1.xuehuaimg.com/proxy/raw.githubusercontent.com/2756864799zhang/image/main/img/202204111247141.png" alt="img" loading="lazy"></p><img src="https://pic1.xuehuaimg.com/proxy/raw.githubusercontent.com/2756864799zhang/image/main/img/202205070146077.png" alt="img" style="zoom:80%;"><p>\u7136\u540E\u5173\u673A\uFF0C\u4FDD\u5B58\u9000\u51FA\u3002</p><h3 id="_7-\u67E5\u770B\u5F53\u524D\u7684qcow2" tabindex="-1"><a class="header-anchor" href="#_7-\u67E5\u770B\u5F53\u524D\u7684qcow2" aria-hidden="true">#</a> 7.\u67E5\u770B\u5F53\u524D\u7684qcow2</h3><p>\u53EF\u4EE5\u53D1\u73B0\u8FD9\u4E2A\u955C\u50CF\u5DF2\u7ECF14GB\uFF0C\u56E0\u4E3A\u5E26\u6709\u73AF\u5883\u3002</p><p><img src="https://pic1.xuehuaimg.com/proxy/raw.githubusercontent.com/2756864799zhang/image/main/img/202205070146943.png" alt="img" loading="lazy"></p><h3 id="_8-\u955C\u50CF\u538B\u7F29-\u538B\u7F29\u78C1\u76D8\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_8-\u955C\u50CF\u538B\u7F29-\u538B\u7F29\u78C1\u76D8\u6587\u4EF6" aria-hidden="true">#</a> 8.\u955C\u50CF\u538B\u7F29\uFF08<strong>\u538B\u7F29\u78C1\u76D8\u6587\u4EF6</strong>\uFF09</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost windows<span class="token punctuation">]</span><span class="token comment"># virt-sparsify  --compress  /root/windows/windows_server2019.qcow2  /opt/windows_server2019.qcow2 </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,39),t=[o];function r(p,c){return n(),s("div",null,t)}const m=a(i,[["render",r],["__file","8.html.vue"]]);export{m as default};
