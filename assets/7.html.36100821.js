import{_ as s}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as n,c as a,f as e}from"./app.ca0279c0.js";const t={},i=e(`<h1 id="kvm-\u670D\u52A1\u521B\u5EFA\u865A\u62DF\u673A" tabindex="-1"><a class="header-anchor" href="#kvm-\u670D\u52A1\u521B\u5EFA\u865A\u62DF\u673A" aria-hidden="true">#</a> KVM \u670D\u52A1\u521B\u5EFA\u865A\u62DF\u673A</h1><h3 id="\u638C\u63E1\u8981\u70B9" tabindex="-1"><a class="header-anchor" href="#\u638C\u63E1\u8981\u70B9" aria-hidden="true">#</a> \u638C\u63E1\u8981\u70B9</h3><blockquote><p>\uFF081\uFF09\u4F7F\u7528\u547D\u4EE4\u5B89\u88C5 KVM \u7EC4\u4EF6\u3002</p><p>\uFF082\uFF09\u638C\u63E1 NAT \u542F\u52A8\u811A\u672C\u7684\u7F16\u5199\u548C\u4F7F\u7528\u3002</p><p>\uFF083\uFF09\u638C\u63E1\u5728 NAT \u6A21\u5F0F\u4E0B\u542F\u52A8\u865A\u62DF\u673A\u3002</p></blockquote><h3 id="\u57FA\u7840\u51C6\u5907" tabindex="-1"><a class="header-anchor" href="#\u57FA\u7840\u51C6\u5907" aria-hidden="true">#</a> \u57FA\u7840\u51C6\u5907</h3><p><strong>1.</strong> \u89C4\u5212\u8282\u70B9</p><table><thead><tr><th><strong>IP</strong> \u5730\u5740</th><th>\u4E3B\u673A\u540D</th><th>\u8282\u70B9</th></tr></thead><tbody><tr><td>172.168.100.10</td><td>localhost</td><td>KVM</td></tr></tbody></table><p>**2.**\u4F7F\u7528 YUM \u5B89\u88C5 KVM \u7684\u4E3B\u8981\u7EC4\u4EF6\u53CA\u5DE5\u5177</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># yum install qemu-kvm openssl libvirt -y  </span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># systemctl start libvirtd </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5C06/usr/libexec/qemu-kvm \u94FE\u63A5\u4E3A/usr/bin/qemu-kvm</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ln -s /usr/libexec/qemu-kvm /usr/bin/qemu-kvm </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>3.</strong> \u521B\u5EFA NAT \u6A21\u5F0F <strong>KVM</strong> \u865A\u62DF\u673A</p><p>\u5C06 cirros-0.3.3-x86_64-disk.img \u955C\u50CF\u4E0E qemu-ifup-NAT \u811A\u672C\u6587\u4EF6\u4E0A\u4F20\u5230\u7CFB\u7EDF/root \u76EE\u5F55\u4E0B\u3002\u7ED9\u811A\u672C\u8D4B\u4E88\u6267\u884C\u6743\u9650\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ls </span>
cirros-0.3.3-x86_64-disk.img  qemu-ifup-NAT 
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># chmod +x /root/qemu-ifup-NAT </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**4.**\u901A\u8FC7 qemu-kvm \u547D\u4EE4\u542F\u52A8 KVM \u865A\u62DF\u673A\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># qemu-kvm  -m 1024 \\</span>
<span class="token parameter variable">-drive</span>  <span class="token assign-left variable">file</span><span class="token operator">=</span>/root/cirros-0.3.3-x86_64-disk.img,if<span class="token operator">=</span>virtio <span class="token punctuation">\\</span>
<span class="token parameter variable">-net</span> nic,model<span class="token operator">=</span>virtio <span class="token punctuation">\\</span>
<span class="token parameter variable">-net</span> tap,script<span class="token operator">=</span>/root/qemu-ifup-NAT <span class="token punctuation">\\</span>
<span class="token parameter variable">-nographic</span> <span class="token parameter variable">-vnc</span> :1 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u52A0\u8F7D\u5B8C\u6210\u4E4B\u540E\u4F1A\u8FDB\u5165\u767B\u9646\u7528\u6237\u754C\u9762\u3002</p><p>\u521B\u5EFA\u865A\u62DF\u673A\u5B8C\u6210\u540E\uFF0Ccirros \u7528\u6237\u767B\u5F55\u865A\u62DF\u673A\uFF0C\u8F93\u5165\u7528\u6237\u540D\u4E3A cirros\uFF0C\u5BC6\u7801\u4E3A cubswin:)\u3002\u7136\u540E\u8F93\u5165 ip addr list \u547D\u4EE4\u67E5\u8BE2 IP \u5730\u5740\uFF0C\u6700\u540E\u8F93\u5165 route -n \u547D\u4EE4\u67E5\u8BE2\u8DEF\u7531\u8868\u3002\u793A\u4F8B\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">==</span><span class="token operator">=</span> cirros: <span class="token assign-left variable">current</span><span class="token operator">=</span><span class="token number">0.3</span>.4 <span class="token assign-left variable">uptime</span><span class="token operator">=</span><span class="token number">12.16</span> <span class="token operator">==</span><span class="token operator">=</span>
  ____               ____  ____
 / __/ __ ____ ____ / __ <span class="token punctuation">\\</span>/ __/
/ /__ / // __// __// /_/ /<span class="token punctuation">\\</span> <span class="token punctuation">\\</span> 
<span class="token punctuation">\\</span>___//_//_/  /_/   <span class="token punctuation">\\</span>____/___/ 
   http://cirros-cloud.net


login as <span class="token string">&#39;cirros&#39;</span> user. default password: <span class="token string">&#39;cubswin:)&#39;</span><span class="token builtin class-name">.</span> use <span class="token string">&#39;sudo&#39;</span> <span class="token keyword">for</span> root.
localhost login: cirros
Password: 

$ <span class="token function">ip</span> addr list
<span class="token number">1</span>: lo: <span class="token operator">&lt;</span>LOOPBACK,UP,LOWER_UP<span class="token operator">&gt;</span> mtu <span class="token number">16436</span> qdisc noqueue 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet <span class="token number">127.0</span>.0.1/8 scope <span class="token function">host</span> lo
    inet6 ::1/128 scope <span class="token function">host</span> 
       valid_lft forever preferred_lft forever
<span class="token number">2</span>: eth0: <span class="token operator">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="token operator">&gt;</span> mtu <span class="token number">1500</span> qdisc pfifo_fast qlen <span class="token number">1000</span>
    link/ether <span class="token number">52</span>:54:00:12:34:56 brd ff:ff:ff:ff:ff:ff
    inet <span class="token number">192.168</span>.122.76/24 brd <span class="token number">192.168</span>.122.255 scope global eth0
    inet6 fe80::5054:ff:fe12:3456/64 scope <span class="token function">link</span> 
       valid_lft forever preferred_lft forever
       
$ route <span class="token parameter variable">-n</span> 
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
<span class="token number">0.0</span>.0.0         <span class="token number">192.168</span>.122.1   <span class="token number">0.0</span>.0.0         UG    <span class="token number">0</span>      <span class="token number">0</span>        <span class="token number">0</span> eth0
<span class="token number">192.168</span>.122.0   <span class="token number">0.0</span>.0.0         <span class="token number">255.255</span>.255.0   U     <span class="token number">0</span>      <span class="token number">0</span>        <span class="token number">0</span> eth0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,18),l=[i];function o(p,r){return n(),a("div",null,l)}const u=s(t,[["render",o],["__file","7.html.vue"]]);export{u as default};
