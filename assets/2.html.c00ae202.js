import{_ as t}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as e,c as r,f as d}from"./app.ca0279c0.js";const i={},n=d('<h1 id="kvm-\u865A\u62DF\u5316\u6280\u672F" tabindex="-1"><a class="header-anchor" href="#kvm-\u865A\u62DF\u5316\u6280\u672F" aria-hidden="true">#</a> KVM \u865A\u62DF\u5316\u6280\u672F</h1><h3 id="kvm-\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#kvm-\u7B80\u4ECB" aria-hidden="true">#</a> KVM \u7B80\u4ECB</h3><p>\u200B <code>KVM\uFF08Kernel-based Virtual Machine\uFF0C\u57FA\u4E8E\u5185\u6838\u7684\u865A\u62DF\u673A\uFF09\u662F\u4E00\u79CD\u5185\u5EFA\u4E8E Linux \u4E2D\u7684\u5F00\u6E90\u865A\u62DF\u5316\u6280\u672F\u3002</code>\u5177\u4F53\u800C\u8A00\uFF0CKVM \u53EF\u5E2E\u52A9\u7528\u6237\u5C06 Linux \u8F6C\u53D8\u4E3A\u865A\u62DF\u673A\u76D1\u63A7\u7A0B\u5E8F\uFF0C\u4F7F\u4E3B\u673A\u8BA1\u7B97\u673A\u80FD\u591F\u8FD0\u884C\u591A\u4E2A\u9694\u79BB\u7684\u865A\u62DF\u73AF\u5883\uFF0C\u5373\u865A\u62DF\u5BA2\u6237\u673A\u6216\u865A\u62DF\u673A\uFF08VM\uFF09\u3002</p><p>\u200B <code>KVM \u662F Linux \u7684\u4E00\u90E8\u5206\uFF0CLinux2.6.20 \u6216\u66F4\u65B0\u7248\u672C\u5305\u62EC KVM\u3002</code>KVM \u4E8E 2006 \u5E74\u9996\u6B21\u516C\u5E03\uFF0C\u5E76\u5728\u4E00\u5E74\u540E\u5408\u5E76\u5230\u4E3B\u6D41 Linux \u5185\u6838\u7248\u672C\u4E2D\u3002\u7531\u4E8E KVM \u5C5E\u4E8E\u73B0\u6709\u7684 Linux \u4EE3\u7801\uFF0C\u56E0\u6B64\u5B83\u80FD\u7ACB\u5373\u4EAB\u53D7\u6BCF\u4E00\u9879\u65B0\u7684 Linux \u529F\u80FD\u3001\u4FEE\u590D\u548C\u53D1\u5C55\uFF0C\u65E0\u9700\u8FDB\u884C\u989D\u5916\u5DE5\u7A0B\u3002</p><h3 id="kvm-\u529F\u80FD\u7279\u6027" tabindex="-1"><a class="header-anchor" href="#kvm-\u529F\u80FD\u7279\u6027" aria-hidden="true">#</a> KVM \u529F\u80FD\u7279\u6027</h3><p><strong>1. \u5185\u5B58\u7BA1\u7406</strong></p><p>\u200B <code>KVM \u4ECE Linux \u7EE7\u627F\u4E86\u5F3A\u5927\u7684\u5185\u5B58\u7BA1\u7406\u529F\u80FD\u3002</code>\u4E00\u4E2A\u865A\u62DF\u673A\u7684\u5185\u5B58\u4E0E\u4EFB\u4F55\u5176\u4ED6 Linux \u8FDB\u7A0B\u7684\u5185\u5B58\u4E00\u6837\u8FDB\u884C\u5B58\u50A8\uFF0C\u53EF\u4EE5\u4EE5\u5927\u9875\u9762\u7684\u5F62\u5F0F\u8FDB\u884C\u4EA4\u6362\u4EE5\u5B9E\u73B0\u66F4\u9AD8\u7684\u6027\u80FD\uFF0C\u4E5F\u53EF\u4EE5\u4EE5\u78C1\u76D8\u6587\u4EF6\u7684\u5F62\u5F0F\u8FDB\u884C\u5171\u4EAB\u3002NUMA\uFF08Non-Uniform Memory Access\uFF0C\u975E\u4E00\u81F4\u5B58\u50A8\u8BBF\u95EE\u7ED3\u6784\uFF09\u5F88\u597D\u5730\u89E3\u51B3\u4E86CPU \u8D44\u6E90\u7684\u6269\u5C55\u95EE\u9898\uFF0C\u5B83\u53EF\u4EE5\u628A\u51E0\u5341\u4E2A\u751A\u81F3\u4E0A\u767E\u4E2A CPU \u7EC4\u5408\u5728\u4E00\u4E2A\u670D\u52A1\u5668\u5185\uFF0C\u652F\u6301\u975E\u4E00\u81F4\u6027\u5185\u5B58\u8BBF\u95EE\uFF0C\u9488\u5BF9\u591A\u5904\u7406\u5668\u7684\u5185\u5B58\u8BBE\u8BA1\uFF0C\u5141\u8BB8\u865A\u62DF\u673A\u6709\u6548\u5730\u8BBF\u95EE\u5927\u91CF\u5185\u5B58\u3002</p><p>\u200B KVM \u652F\u6301\u6700\u65B0\u7684\u57FA\u4E8E\u786C\u4EF6\u7684\u5185\u5B58\u865A\u62DF\u5316\u529F\u80FD\uFF0C\u652F\u6301 Intel \u7684\u6269\u5C55\u9875\u8868\uFF08EPT\uFF09\u548C AMD \u7684\u5D4C\u5957\u9875\u8868\uFF08NPT\uFF0C\u4E5F\u53EB\u201C\u5FEB\u901F\u865A\u62DF\u5316\u7D22\u5F15-RVI\u201D\uFF09\uFF0C\u4EE5\u5B9E\u73B0\u66F4\u4F4E\u7684 CPU \u5229\u7528\u7387\u548C\u66F4\u9AD8\u7684\u541E\u5410\u91CF\u3002\u5185\u5B58\u9875\u9762\u5171\u4EAB\u901A\u8FC7\u4E00\u9879\u540D\u4E3A\u5185\u6838\u540C\u9875\u5408\u5E76\uFF08KernelSame-pageMerging\uFF0CKSM\uFF09\u7684\u5185\u6838\u529F\u80FD\u6765\u652F\u6301\u3002KSM \u626B\u63CF\u6BCF\u4E2A\u865A\u62DF\u673A\u7684\u5185\u5B58\uFF0C\u5982\u679C\u865A\u62DF\u673A\u62E5\u6709\u76F8\u540C\u7684\u5185\u5B58\u9875\u9762\uFF0CKSM \u5C06\u8FD9\u4E9B\u9875\u9762\u5408\u5E76\u5230\u4E00\u4E2A\u5728\u865A\u62DF\u673A\u4E4B\u95F4\u5171\u4EAB\u7684\u9875\u9762\uFF0C\u4EC5\u5B58\u50A8\u4E00\u4E2A\u526F\u672C\u3002\u5982\u679C\u4E00\u4E2A\u5BA2\u6237\u673A\u5C1D\u8BD5\u66F4\u6539\u8FD9\u4E2A\u5171\u4EAB\u9875\u9762\uFF0C\u5B83\u5C06\u5F97\u5230\u81EA\u5DF1\u7684\u4E13\u7528\u526F\u672C\u3002</p><p><strong>2. \u5B58\u50A8</strong></p><p>\u200B <code>KVM \u80FD\u591F\u4F7F\u7528 Linux \u652F\u6301\u7684\u4EFB\u4F55\u5B58\u50A8\u6765\u5B58\u50A8\u865A\u62DF\u673A\u955C\u50CF</code>\uFF0C\u5305\u62EC\u5177\u6709 IDE\u3001SCSI \u548C SATA \u7684\u672C\u5730\u78C1\u76D8\uFF0C\u7F51\u7EDC\u9644\u52A0\u5B58\u50A8 NAS\uFF08\u5305\u62EC NFS \u548C SAMBA/CIFS\uFF09\u6216\u8005\u652F\u6301 iSCSI \u548C\u5149\u7EA4\u901A\u9053\u7684</p><p>SAN\u3002\u591A\u8DEF\u5F84 I/O \u53EF\u7528\u4E8E\u6539\u8FDB\u5B58\u50A8\u541E\u5410\u91CF\u548C\u63D0\u4F9B\u5197\u4F59\u3002\u7531\u4E8E KVM \u662F Linux \u5185\u6838\u7684\u4E00\u90E8\u5206\uFF0C\u5B83\u53EF\u4EE5\u5229\u7528\u6240\u6709\u9886\u5148\u5B58\u50A8\u4F9B\u5E94\u5546\u90FD\u652F\u6301\u7684\u4E00\u79CD\u6210\u719F\u4E14\u53EF\u9760\u7684\u5B58\u50A8\u57FA\u7840\u67B6\u6784\uFF0C\u5B83\u7684\u5B58\u50A8\u5806\u6808\u5728\u751F\u4EA7\u90E8\u7F72\u65B9\u9762\u5177\u6709\u826F\u597D\u7684\u8BB0\u5F55\u3002</p><p>\u200B KVM \u8FD8\u652F\u6301\u5168\u5C40\u6587\u4EF6\u7CFB\u7EDF\uFF08GFS2\uFF09\u7B49\u5171\u4EAB\u6587\u4EF6\u7CFB\u7EDF\u4E0A\u7684\u865A\u62DF\u673A\u955C\u50CF\uFF0C\u4EE5\u5141\u8BB8\u865A\u62DF\u673A\u955C\u50CF\u5728\u591A\u4E2A\u5BBF\u4E3B\u4E4B\u95F4\u5171\u4EAB\u6216\u4F7F\u7528\u903B\u8F91\u5377\u5171\u4EAB\u3002\u78C1\u76D8\u955C\u50CF\u652F\u6301\u6309\u9700\u5206\u914D\uFF0C\u4EC5\u5728\u865A\u62DF\u673A\u9700\u8981\u65F6\u5206\u914D\u5B58\u50A8\u7A7A\u95F4\uFF0C\u800C\u4E0D\u662F\u63D0\u524D\u5206\u914D\u6574\u4E2A\u5B58\u50A8\u7A7A\u95F4\uFF0C\u63D0\u9AD8\u5B58\u50A8\u5229\u7528\u7387\u3002<code>KVM \u7684\u539F\u751F\u78C1\u76D8\u683C\u5F0F\u4E3A QCOW2\uFF0C\u5B83\u652F\u6301\u5FEB\u7167\uFF0C\u5141\u8BB8\u591A\u7EA7\u5FEB\u7167\u3001\u538B\u7F29\u548C\u52A0\u5BC6\u3002</code></p><p><strong>3.\u8BBE\u5907\u9A71\u52A8\u7A0B\u5E8F</strong></p><p>\u200B <code>KVM \u652F\u6301\u6DF7\u5408\u865A\u62DF\u5316</code>\uFF0C\u5176\u4E2D\u51C6\u865A\u62DF\u5316\u7684\u9A71\u52A8\u7A0B\u5E8F\u5B89\u88C5\u5728\u5BA2\u6237\u673A\u64CD\u4F5C\u7CFB\u7EDF\u4E2D\uFF0C\u5141\u8BB8\u865A\u62DF\u673A\u4F7F\u7528\u4F18\u5316\u7684 I/O \u63A5\u53E3\u800C\u4E0D\u4F7F\u7528\u6A21\u62DF\u7684\u8BBE\u5907\uFF0C\u4ECE\u800C\u4E3A\u7F51\u7EDC\u548C\u5757\u8BBE\u5907\u63D0\u4F9B\u9AD8\u6027\u80FD\u7684 I/O\u3002KVM \u51C6\u865A\u62DF\u5316\u7684\u9A71\u52A8\u7A0B\u5E8F\u4F7F\u7528 IBM \u548C RedHat\uFF08\u7EA2\u5E3D\uFF09\u8054\u5408 Linux \u793E\u533A\u5F00\u53D1\u7684 VirtIO \u6807\u51C6\uFF0C\u5B83\u662F\u4E00\u4E2A\u4E0E\u865A\u62DF\u673A\u7BA1\u7406\u7A0B\u5E8F\u72EC\u7ACB\u7684\u3001\u6784\u5EFA\u8BBE\u5907\u9A71\u52A8\u7A0B\u5E8F\u7684\u63A5\u53E3\uFF0C\u5141\u8BB8\u4E3A\u591A\u4E2A\u865A\u62DF\u673A\u7BA1\u7406\u7A0B\u5E8F\u4F7F\u7528\u4E00\u7EC4\u76F8\u540C\u7684\u8BBE\u5907\u9A71\u52A8\u7A0B\u5E8F\uFF0C\u80FD\u591F\u5B9E\u73B0\u66F4\u51FA\u8272\u7684\u865A\u62DF\u673A\u4EA4\u4E92\u6027\u3002</p><p><strong>4.\u6027\u80FD\u548C\u53EF\u4F38\u7F29\u6027</strong></p><p>\u200B KVM \u4E5F\u7EE7\u627F\u4E86 Linux \u7684\u6027\u80FD\u548C\u53EF\u4F38\u7F29\u6027\u3002KVM \u865A\u62DF\u5316\u6027\u80FD\u5728\u5F88\u591A\u65B9\u9762\uFF08\u5982\u8BA1\u7B97\u80FD\u529B\u3001\u7F51\u7EDC\u5E26\u5BBD\u7B49\uFF09\u5DF2\u7ECF\u53EF\u4EE5\u8FBE\u5230\u975E\u865A\u62DF\u5316\u539F\u751F\u73AF\u5883\u768495%\u4EE5\u4E0A\u7684\u6027\u80FD\u3002KVM\u7684\u6269\u5C55\u6027\u4E5F\u975E\u5E38\u826F\u597D\uFF0C\u5BA2\u6237\u673A\u548C\u5BBF\u4E3B\u673A\u90FD\u53EF\u4EE5\u652F\u6301\u975E\u5E38\u591A\u7684 CPU \u6570\u91CF\u548C\u5927\u91CF\u7684\u5185\u5B58\u3002</p><h3 id="kvm-\u67B6\u6784\u53CA\u76F8\u5173\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#kvm-\u67B6\u6784\u53CA\u76F8\u5173\u7EC4\u4EF6" aria-hidden="true">#</a> KVM \u67B6\u6784\u53CA\u76F8\u5173\u7EC4\u4EF6</h3><p><img src="https://pic1.xuehuaimg.com/proxy/raw.githubusercontent.com/2756864799zhang/image/main/img/202204111246811.png" alt="image-20220209154554044" loading="lazy"></p><p>KVM\u67B6\u6784\u5982\u56FE\uFF0C\u5DE6\u4FA7\u90E8\u5206\u662F\u4E00\u4E2A\u6807\u51C6\u7684Linux\u64CD\u4F5C\u7CFB\u7EDF\uFF0C\u53EF\u4EE5\u662FRHEL\u3001CentOS\u3001Ubuntu \u7B49\u3002KVM \u5185\u6838\u6A21\u5757\u5728\u8FD0\u884C\u65F6\uFF0C\u6309\u9700\u52A0\u8F7D\u8FDB\u5165\u5185\u6838\u7A7A\u95F4\u8FD0\u884C\u3002KVM \u672C\u8EAB\u4E0D\u6267\u884C\u4EFB\u4F55\u8BBE\u5907\u6A21\u62DF\uFF0C\u9700\u8981\u7528\u6237\u7A7A\u95F4\u7A0B\u5E8F QEMU \u901A\u8FC7/dev/kvm \u63A5\u53E3\u8BBE\u7F6E\u4E00\u4E2A\u865A\u62DF\u5BA2\u6237\u673A\u7684\u5730\u5740\u7A7A\u95F4\uFF0C\u5411\u5B83\u63D0\u4F9B\u6A21\u62DF\u7684 I/O \u8BBE\u5907\uFF0C\u5E76\u5C06\u5B83\u7684\u89C6\u9891\u663E\u793A\u6620\u5C04\u56DE\u5BBF\u4E3B\u673A\u7684\u663E\u793A\u5C4F\u3002</p><p><strong>1.</strong> <strong>KVM</strong> \u6A21\u5757</p><p>\u200B <code>KVM \u6A21\u5757\u662F KVM \u865A\u62DF\u673A\u7684\u6838\u5FC3\u90E8\u5206\u3002</code>KVM \u4EC5\u652F\u6301\u786C\u4EF6\u865A\u62DF\u5316\u3002\u5176\u4E3B\u8981\u529F\u80FD\u662F\u521D\u59CB\u5316CPU \u786C\u4EF6\uFF0C\u6253\u5F00\u865A\u62DF\u5316\u6A21\u5F0F\uFF0C\u7136\u540E\u5C06\u865A\u62DF\u5BA2\u6237\u673A\u8FD0\u884C\u5728\u865A\u62DF\u673A\u6A21\u5F0F\u4E0B\uFF0C\u5E76\u5BF9\u865A\u62DF\u5BA2\u6237\u673A\u7684\u8FD0\u884C\u63D0\u4F9B\u4E00\u5B9A\u7684\u652F\u6301\u3002</p><p>\u200B \u4EE5 KVM \u5728 Intel \u7684 CPU \u4E0A\u8FD0\u884C\u4E3A\u4F8B\uFF0C\u5728\u88AB\u5185\u6838\u52A0\u8F7D\u7684\u65F6\u5019\uFF0CKVM \u6A21\u5757\u4F1A\u5148\u521D\u59CB\u5316\u5185\u90E8\u7684\u6570\u636E\u7ED3\u6784\uFF1B\u4E4B\u540E KVM \u6A21\u5757\u68C0\u6D4B\u7CFB\u7EDF\u5F53\u524D\u7684 CPU\uFF0C\u7136\u540E\u6253\u5F00 CPU \u63A7\u5236\u5BC4\u5B58\u5668 CR4 \u4E2D\u7684\u865A\u62DF\u5316\u6A21\u5F0F\u5F00\u5173\uFF0C\u5E76\u901A\u8FC7\u6267\u884C VMXON \u6307\u4EE4\u5C06\u5BBF\u4E3B\u64CD\u4F5C\u7CFB\u7EDF\u7F6E\u4E8E\u865A\u62DF\u5316\u6A21\u5F0F\u7684\u6839\u6A21\u5F0F\uFF1B\u6700\u540E KVM \u6A21\u5757\u521B\u5EFA\u7279\u6B8A\u8BBE\u5907\u6587\u4EF6/dev/kvm\uFF0C\u5E76\u7B49\u5F85\u6765\u81EA\u7528\u6237\u7A7A\u95F4\u7684\u547D\u4EE4\u3002\u63A5\u4E0B\u6765\u865A\u62DF\u673A\u7684\u521B\u5EFA\u548C\u8FD0\u884C\u662F\u4E00\u4E2A\u7528\u6237\u7A7A\u95F4\u7A0B\u5E8F\uFF08QEMU\uFF09\u548C KVM \u6A21\u5757\u4E92\u76F8\u914D\u5408\u7684\u8FC7\u7A0B\u3002</p><p><strong>2.</strong> <strong>QEMU</strong></p><p>\u200B <code>QEMU \u662F\u4E00\u4E2A\u5F00\u6E90\u7684\u865A\u62DF\u673A\u7EAF\u8F6F\u4EF6\u7684\u5B9E\u73B0\uFF0C\u6027\u80FD\u4F4E\u4E0B\u3002</code>\u4F46\u662F\u5176\u4F18\u70B9\u662F\u652F\u6301\u672C\u8EAB\u7F16\u8BD1\u8FD0\u884C\u7684\u5E73\u53F0\u4E0A\u5C31\u53EF\u4EE5\u5B9E\u73B0\u865A\u62DF\u673A\u7684\u529F\u80FD\uFF0C\u751A\u81F3\u865A\u62DF\u673A\u53EF\u4EE5\u4E0E\u5BBF\u4E3B\u673A\u4E0D\u540C\u67B6\u6784\u3002QEMU \u4EE3\u7801\u4E2D\u6709\u7740\u6574\u5957\u865A\u62DF\u673A\u7684\u5B9E\u73B0\uFF0C\u5305\u62EC\u5904\u7406\u5668\u3001\u5185\u5B58\u865A\u62DF\u5316\u4EE5\u53CA\u865A\u62DF\u8BBE\u5907\u6A21\u62DF\uFF08\u6BD4\u5982\u7F51\u5361\u3001\u663E\u5361\u3001\u5B58\u50A8\u63A7\u5236\u5668\u53CA\u786C\u76D8\u7B49\uFF09\u3002</p><p>\u200B \u865A\u62DF\u673A\u8FD0\u884C\u671F\u95F4\uFF0CQEMU \u4F1A\u901A\u8FC7 KVM \u6A21\u5757\u63D0\u4F9B\u7684\u7CFB\u7EDF\u63A5\u53E3\u8C03\u7528\u8FDB\u5165\u5185\u6838\uFF0C\u7531 KVM \u6A21\u5757\u5C06\u865A\u62DF\u673A\u81F3\u4E8E\u5904\u7406\u5668\u7684\u7279\u6B8A\u6A21\u5F0F\u8FD0\u884C\u3002\u9047\u5230\u865A\u62DF\u673A\u8F93\u5165\u8F93\u51FA\u64CD\u4F5C\uFF0CKVM \u6A21\u5757\u4F1A\u4ECE\u4E0A\u6B21\u7CFB\u7EDF\u8C03\u7528\u7684\u63A5\u53E3\u8FD4\u56DE\u7ED9 QEMU\uFF0C\u7531 QEMU \u6765\u8D1F\u8D23\u89E3\u6790\u548C\u5904\u7406\u8FD9\u4E9B\u8BBE\u5907\u3002\u4ECE QEMU \u89D2\u5EA6\u770B\uFF0C QEMU \u4F7F\u7528\u4E86 KVM \u6A21\u5757\u7684\u865A\u62DF\u5316\u529F\u80FD\uFF0C\u4E3A\u81EA\u5DF1\u7684\u865A\u62DF\u673A\u63D0\u4F9B\u786C\u4EF6\u865A\u62DF\u5316\u7684\u52A0\u901F\uFF0C\u6781\u5927\u63D0\u9AD8\u865A\u62DF\u673A\u7684\u6027\u80FD\u3002\u865A\u62DF\u673A\u7684\u914D\u7F6E\u548C\u521B\u5EFA\uFF0C\u8FD0\u884C\u4F9D\u8D56\u7684\u865A\u62DF\u8BBE\u5907\u3001\u7528\u6237\u64CD\u4F5C\u73AF\u5883\u548C\u4EA4\u4E92\uFF0C\u4EE5\u53CA\u4E00\u4E9B\u7279\u6B8A\u529F\u80FD\uFF08\u5982\u52A8\u6001\u8FC1\u79FB\uFF09\uFF0C\u90FD\u662F\u7531 QEMU \u81EA\u5DF1\u5B9E\u73B0\u7684\u3002QEMU \u548C KVM \u6A21\u5757\u4E24\u8005\u7684\u7ED3\u5408\u65E0\u7591\u662F\u6700\u5408\u9002\u7684\u9009\u62E9\u3002\u800C qemu-kvm \u662F\u4E3A\u4E86 KVM \u4E13\u95E8\u505A\u4E86\u4FEE\u6539\u548C\u4F18\u5316\u7684 QEMU \u5206\u652F\u3002</p><p><strong>3.</strong> <strong>Libvirt</strong></p><p>\u200B Libvirt \u662F KVM \u7684\u7BA1\u7406\u5DE5\u5177\u3002Libvirt \u9664\u4E86\u80FD\u7BA1\u7406 KVM \u8FD9\u79CD Hypervisor\uFF0C\u8FD8\u80FD\u7BA1\u7406 Xen\uFF0CVirtualBox \u7B49\uFF0COpenStack \u5E95\u5C42\u4E5F\u4F7F\u7528 Libvirt\u3002</p><p>Libvirt \u5305\u542B\uFF1A\u540E\u53F0 Daemon \u7A0B\u5E8F libvirtd\u3001API \u5E93\u548C\u547D\u4EE4\u884C\u5DE5\u5177 virsh\u3002</p><p>\u26AB **libvirtd\uFF1A**\u670D\u52A1\u7A0B\u5E8F\uFF0C\u63A5\u6536\u548C\u5904\u7406 API \u8BF7\u6C42\uFF1B</p><p>\u26AB **API \u5E93\uFF1A**\u4F7F\u5F97\u5176\u4ED6\u4EBA\u53EF\u4EE5\u5F00\u53D1\u57FA\u4E8E Libvirt \u7684\u9AD8\u7EA7\u5DE5\u5177\uFF0C\u6BD4\u5982 virt-manager\uFF0C\u662F\u56FE\u5F62\u5316\u7684KVM \u7BA1\u7406\u5DE5\u5177\uFF1B</p><p>\u26AB **virsh\uFF1A**\u662F\u4EBA\u4EEC\u7ECF\u5E38\u8981\u7528\u7684 KVM \u547D\u4EE4\u884C\u5DE5\u5177\uFF0C\u540E\u9762\u5C0F\u8282\u5185\u5BB9\u4F1A\u6709\u4F7F\u7528\u7684\u793A\u4F8B\u3002</p><p>\u4F5C\u4E3A KVM\u548C OpenStack \u7684\u5B9E\u65BD\u4EBA\u5458\uFF0Cvirsh \u6216 virt-manager \u662F\u4E00\u5B9A\u8981\u5B66\u4F1A\u4F7F\u7528\u7684\u3002 \u901A\u5E38\u53EF\u9009\u62E9\u4F7F\u7528\u547D\u4EE4\u5DE5\u5177 virsh \u66FF\u4EE3\u56FE\u5F62\u754C\u9762\u7684 virt-manager \u5DE5\u5177\uFF0Cvirsh \u5E38\u7528\u547D\u4EE4\u89C1\u8868</p><table><thead><tr><th>\u547D\u4EE4</th><th>\u89E3\u91CA</th></tr></thead><tbody><tr><td>virsh define DomainName.xml</td><td>\u901A\u8FC7\u914D\u7F6E\u6587\u4EF6\u5B9A\u4E49\u4E00\u4E2A\u865A\u62DF\u673A</td></tr><tr><td>virsh create DomainName.xml</td><td>\u521B\u5EFA\u865A\u62DF\u673A</td></tr><tr><td>virsh edit DomainName</td><td>\u4FEE\u6539\u6D4B\u8BD5 KVM \u7684\u914D\u7F6E\u6587\u4EF6</td></tr><tr><td>virsh list --all</td><td>\u67E5\u770B\u865A\u62DF\u673A\u7684\u72B6\u6001</td></tr><tr><td>virsh dominfo DomainName</td><td>\u663E\u793A\u865A\u62DF\u673A\u7684\u57FA\u672C\u4FE1\u606F</td></tr><tr><td>virsh domname 2</td><td>\u663E\u793A id \u53F7\u4E3A 2 \u7684\u865A\u62DF\u673A\u540D</td></tr><tr><td>virsh domid DomainName</td><td>\u663E\u793A\u865A\u62DF\u673A id \u53F7</td></tr><tr><td>virsh domuuid DomainName</td><td>\u663E\u793A\u865A\u62DF\u673A\u7684 uuid</td></tr><tr><td>virsh domstate DomainName</td><td>\u663E\u793A\u865A\u62DF\u673A\u7684\u5F53\u524D\u72B6\u6001</td></tr><tr><td>virsh dumpxml DomainName</td><td>\u663E\u793A\u865A\u62DF\u673A\u7684\u5F53\u524D\u914D\u7F6E\u6587\u4EF6</td></tr><tr><td>virsh save DomainName a</td><td>\u5C06\u8BE5\u865A\u62DF\u673A\u7684\u8FD0\u884C\u72B6\u6001\u5B58\u50A8\u5230\u6587\u4EF6 a \u4E2D</td></tr><tr><td>virsh undefine DomainName</td><td>\u79FB\u9664\u865A\u62DF\u673A\uFF0C\u865A\u62DF\u673A\u5904\u4E8E\u5173\u95ED\u72B6\u6001\u540E\u8FD8\u53EF\u4EE5\u542F\u52A8\uFF0C\u4F46\u662F\u88AB\u8BE5\u6307\u4EE4\u5220\u9664\u540E\u4E0D\u80FD\u542F\u52A8\u3002\u5728\u865A\u62DF\u673A\u5904\u4E8E Running \u72B6\u6001\u65F6\uFF0C\u8C03\u7528\u8BE5\u6307\u4EE4\uFF0C\u8BE5\u6307\u4EE4\u6682\u65F6\u4E0D\u751F\u6548\u3002\u4F46\u662F\u5F53\u865A\u62DF\u673A\u88AB\u5173\u95ED\u540E\uFF0C\u8BE5\u6307\u4EE4\u751F\u6548\u79FB\u9664\u8BE5\u865A\u62DF\u673A\uFF0C\u4E5F\u53EF\u4EE5\u5728\u8BE5\u6307\u4EE4\u751F\u6548\u4E4B\u524D\u8C03\u7528 define+TestKVM.xml \u53D6\u6D88\u8BE5\u6307\u4EE4</td></tr><tr><td>virt-clone -o DomainName -n DomainName01 \u2013file /data/DomainName01.img</td><td>\u5728-o \u540E\u9762\u4E3A\u88AB\u514B\u9686\u865A\u62DF\u673A\u540D\u79F0\uFF0C-n \u540E\u4E3A\u514B\u9686\u6240\u5F97\u865A\u62DF\u673A\u540D\u79F0\uFF0Cfile \u4E3A\u514B\u9686\u6240\u5F97\u865A\u62DF\u673A\u955C\u50CF\u5B58\u653E\u5730\u5740\u3002\u514B\u9686\u7684\u597D\u5904\u5728\u4E8E\uFF0C\u5047\u5982\u5728\u4E00\u4E2A\u865A\u62DF\u673A\u4E0A\u5B89\u88C5\u4E86\u64CD\u4F5C\u7CFB\u7EDF\u548C\u4E00\u4E9B\u8F6F\u4EF6\uFF0C\u90A3\u4E48\u4ECE\u4ED6\u514B\u9686\u6240\u5F97\u7684\u865A\u62DF\u673A\u4E5F\u6709\u4E00\u6837\u7684\u7CFB\u7EDF\u548C\u8F6F\u4EF6\uFF0C\u5927\u5927\u8282\u7EA6\u4E86\u91CD\u65B0\u5B89\u88C5\u865A\u62DF\u673A\u7684\u65F6\u95F4</td></tr></tbody></table><h3 id="kvm-\u7684\u7F51\u7EDC\u6A21\u578B\u6982\u8FF0" tabindex="-1"><a class="header-anchor" href="#kvm-\u7684\u7F51\u7EDC\u6A21\u578B\u6982\u8FF0" aria-hidden="true">#</a> KVM \u7684\u7F51\u7EDC\u6A21\u578B\u6982\u8FF0</h3><p>\u200B KVM \u865A\u62DF\u5316\u4F7F\u7528\u4E00\u79CD\u79F0\u4E3A\u865A\u62DF\u4EA4\u6362\u7684\u6280\u672F\u5B9E\u73B0\u865A\u62DF\u673A\u7684\u7F51\u7EDC\u4E92\u8054\uFF0C\u865A\u62DF\u4EA4\u6362\u662F\u8FD0\u884C\u5728\u5BBF\u4E3B\u673A\u4E0A\u7684\u4E00\u4E2A\u8F6F\u4EF6\u7ED3\u6784\uFF0C\u865A\u62DF\u4E3B\u673A\u901A\u8FC7\u8FD9\u4E2A\u865A\u62DF\u4EA4\u6362\u8FDB\u884C\u76F4\u8FDE\uFF0C\u5B9E\u73B0\u4E0E\u5916\u754C\u901A\u4FE1\u3002\u865A\u62DF\u4EA4\u6362\u53EF\u4EE5\u8FD0\u884C\u5728 NAT \u6A21\u5F0F\u3001\u8DEF\u7531\u6A21\u5F0F\u7B49\u3002\u89C1\u8868\u63CF\u8FF0\u4E86\u8FD9\u4E9B\u6A21\u5F0F\u7684\u7279\u6027\u548C\u529F\u80FD\uFF1A</p><table><thead><tr><th style="text-align:center;">\u6A21\u5F0F</th><th style="text-align:center;">\u529F\u80FD</th></tr></thead><tbody><tr><td style="text-align:center;">\u9694\u79BB\u6A21\u578B</td><td style="text-align:center;">\u865A\u62DF\u673A\u4E4B\u95F4\u7EC4\u5EFA\u7F51\u7EDC\uFF0C\u8BE5\u6A21\u5F0F\u65E0\u6CD5\u4E0E\u5BBF\u4E3B\u673A\u901A\u4FE1\uFF0C\u65E0\u6CD5\u4E0E\u5176\u4ED6\u7F51\u7EDC\u901A\u4FE1\uFF0C\u76F8\u5F53\u4E8E\u865A\u62DF\u673A\u53EA\u662F\u8FDE\u63A5\u5230\u4E00\u53F0\u4EA4\u6362\u673A\u4E0A</td></tr><tr><td style="text-align:center;">NAT \u6A21\u5F0F</td><td style="text-align:center;">\u8BE5\u6A21\u5F0F\u7F51\u6865\u8981\u4F5C\u4E3A\u8DEF\u7531\u5668\u5BF9\u865A\u62DF\u673A\u5730\u5740\u8FDB\u884C\u8F6C\u53D1\uFF0C\u8DEF\u7531\u6A21\u5F0F\u662F\u65E0\u6CD5\u4FEE\u6539\u6E90\u5730\u5740 IP\uFF0C\u56E0\u6B64\u865A\u62DF\u673A\u53EF\u80FD\u4F1A\u6210\u529F\u5730\u5C06\u62A5\u6587\u53D1\u9001\u7ED9\u76EE\u6807\u5730\u5740 IP\uFF0C\u800C\u76EE\u6807\u5730\u5740 IP \u65E0\u6CD5\u5C06\u62A5\u6587\u56DE\u4F20\u7ED9\u6E90\u5730\u5740 IP</td></tr><tr><td style="text-align:center;">\u8DEF\u7531\u6A21\u578B</td><td style="text-align:center;">\u76F8\u5F53\u4E8E\u865A\u62DF\u673A\u8FDE\u63A5\u5230\u4E00\u53F0\u8DEF\u7531\u5668\u4E0A\uFF0C\u7531\u8DEF\u7531\u5668\uFF08\u7269\u7406\u7F51\u5361\uFF09\uFF0C\u7EDF\u4E00\u8F6C\u53D1\uFF0C\u4F46\u662F\u4E0D\u4F1A\u6539\u53D8\u6E90\u5730\u5740</td></tr><tr><td style="text-align:center;">\u6865\u63A5\u6A21\u578B</td><td style="text-align:center;">\u5728\u8BE5\u6A21\u5F0F\u4E0B\uFF0C\u5BBF\u4E3B\u673A\u4F1A\u865A\u62DF\u51FA\u6765\u4E00\u5F20\u865A\u62DF\u7F51\u5361\u4F5C\u4E3A\u5BBF\u4E3B\u673A\u672C\u8EAB\u7684\u901A\u4FE1\u7F51\u5361\uFF0C\u800C\u5BBF\u4E3B\u673A\u7684\u7269\u7406\u7F51\u5361\u5219\u6210\u4E3A\u6865\u8BBE\u5907\uFF08\u4EA4\u6362\u673A\uFF09\uFF0C\u6240\u4EE5\u865A\u62DF\u673A\u76F8\u5F53\u4E8E\u5728\u5BBF\u4E3B\u673A\u6240\u5728\u5C40\u57DF\u7F51\u5185\u7684\u4E00\u4E2A\u5355\u72EC\u7684\u4E3B\u673A\uFF0C\u5B83\u7684\u884C\u4E3A\u548C\u5BBF\u4E3B\u673A\u662F\u540C\u7B49\u5730\u4F4D\u7684\uFF0C\u6CA1\u6709\u4F9D\u5B58\u5173\u7CFB</td></tr></tbody></table>',36),a=[n];function o(s,m){return e(),r("div",null,a)}const h=t(i,[["render",o],["__file","2.html.vue"]]);export{h as default};
